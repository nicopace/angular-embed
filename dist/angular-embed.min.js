!function(){"use strict";angular.module("noEmbed",["ngResource"]),angular.module("iframely",["ngResource"]);var e=["noEmbed","iframely"];try{angular.module("angular-embedly"),e.push("angular-embedly")}catch(t){}angular.module("angular-embed.services",e),angular.module("angular-embed",["angular-embed.services"]),angular.module("angular-embed.handlers",["angular-embed"])}(),function(){"use strict";angular.module("angular-embed").directive("ngEmbed",["embedService",function(e){return{restrict:"AEC",controller:function(t,r,n){e.get(n.url?n.url:n.ngEmbed).then(function(e){r.html(e.html)})}}}])}(),function(){"use strict";function e(e,t,r){return{name:"Facebook",patterns:["https?://(www\\.)facebook.com/.*"],embed:function(n,a){var i=t.defer();return e.embed(n,a).then(function(e){var t="_"+Math.random().toString(36).substr(2,9),n=e.data;"Facebook"===n.provider_name&&n.html&&void 0!==a&&(n.html=n.html.replace('class="fb-post"','class="fb-post" data-width="'+a+'"'),n.html=n.html.replace('<div id="fb-root"></div>',""),n.html=n.html.replace("</script>",'</script><div id="'+t+'">'),n.html+="</div>",n.html+=["<script>","  if(window.FB !== undefined) {",'    window.FB.XFBML.parse(document.getElementById("'+t+'"));',"  }","</script>"].join(""),void 0!==r.getConfig("facebookAppId")&&(n.html=n.html.replace("js#xfbml=1","js#xfbml=1&status=0&appId="+r.getConfig("facebookAppId")))),i.resolve(n)},function(e){i.reject(e.error_message||e.data.error_message)}),i.promise}}}angular.module("angular-embed.handlers").service("ngEmbedFacebookHandler",["embedlyService","$q","embedService",e])}(),function(){"use strict";function e(e,t){return{name:"Instagram",patterns:["https?://instagr(?:\\.am|am\\.com)/p/.+"],embed:function(r,n){var a=t.defer();return e.embed(r,n).then(function(e){delete e.data.description,a.resolve(e.data)},function(e){a.reject(e.error_message||e.data.error_message)}),a.promise}}}angular.module("angular-embed.handlers").service("ngEmbedInstagramHandler",["embedlyService","$q",e])}(),function(){"use strict";function e(e,t){return{patterns:["(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*\\.(?:jpg|gif|png))(?:\\?([^#]*))?(?:#(.*))?"],embed:function(r,n){var a=t.defer();return e.embed(r,n).then(function(e){var t=e.data;"photo"!==t.type||t.thumbnail_url||(t.thumbnail_url=t.url,t.thumbnail_width=t.width,t.thumbnail_height=t.height),a.resolve(t)},function(e){a.reject(e.error_message||e.data.error_message)}),a.promise}}}angular.module("angular-embed.handlers").service("ngEmbedPictureHandler",["embedlyService","$q",e])}(),function(){"use strict";function e(e,t){return{name:"Twitter",patterns:["https?://(?:www|mobile\\.)?twitter\\.com/(?:#!/)?[^/]+/status(?:es)?/(\\d+)/?$","https?://t\\.co/[a-zA-Z0-9]+"],embed:function(r){var n=t.defer();return e.embed(r).then(function(e){var t="_"+Math.random().toString(36).substr(2,9),a=e.data;a.element_id=t,"Twitter"===a.provider_name&&(a.html=['<div id="'+t+'">','     <blockquote class="twitter-tweet">',"         <p>",a.description,"         </p>&mdash; ","         "+a.title+" (@"+a.author_name+")",'         <a href="'+r+'">'+r+"</a>","     </blockquote>","</div>","<script>","    window.twttr = (function(d, s, id) {","        var js, fjs = d.getElementsByTagName(s)[0],t = window.twttr || {};","        if (d.getElementById(id)) return t; js = d.createElement(s);js.id = id;",'        js.src = "https://platform.twitter.com/widgets.js";',"        fjs.parentNode.insertBefore(js, fjs); t._e = [];",'        t.ready = function(f) {t._e.push(f);}; return t;}(document, "script", "twitter-wjs"));',"    window.twttr.ready(function(){",'        window.twttr.widgets.load(document.getElementById("'+t+'"));',"    });","</script>"].join("\n")),n.resolve(a)},function(e){n.reject(e.error_message||e.data.error_message)}),n.promise}}}angular.module("angular-embed.handlers").service("ngEmbedTwitterHandler",["embedlyService","$q",e])}(),function(){"use strict";function e(e,t){return{name:"Youtube",patterns:["https?://(?:[^\\.]+\\.)?youtube\\.com/watch/?\\?(?:.+&)?v=([^&]+)","https?://youtu\\.be/([a-zA-Z0-9_-]+)"],embed:function(r,n){var a=t.defer();return e.embed(r,n).then(function(e){a.resolve(e.data)},function(e){a.reject(e.error_message||e.data.error_message)}),a.promise}}}angular.module("angular-embed.handlers").service("ngEmbedYoutubeHandler",["embedlyService","$q",e])}(),function(){"use strict";function e(){function e(e,r,n,a){function i(e,t){return e.some(function(e){return e.patterns.some(function(e){var r=new RegExp(e);return r.test(t)})})}var o=n.when();return t.getConfig("useOnlyFallback",!1)||(o=e.providers()),{registerHandler:t.registerHandler,setConfig:t.setConfig,getConfig:t.getConfig,get:function(u,s){function d(){var e=a.get("embedlyService");e.embed(u,s).then(function(e){l.resolve(e.data)},function(e){var t=e.error_message||e.data?e.data.error_message:void 0;l.reject(t)})}function c(){e.embed(u).then(function(e){void 0!==e.error?l.reject(e.error):l.resolve(e)})}function m(){r.embed(u).then(function(e){l.resolve(e)},function(e){var t=e.error_message;l.reject(t)})}var l=n.defer();return t.specialHandlers.some(function(e){return e.patterns.some(function(t){var r=new RegExp(t);return r.test(u)?(n.when(e.embed(u,s)).then(function(e){l.resolve(e)}),!0):!1})})||o.then(function(e){if(!t.getConfig("useOnlyFallback",!1)&&i(e,u))c();else{var r={embedly:d,iframely:m};r[t.getConfig("fallbackService","embedly")]()}},function(){d()}),l.promise}}}var t=this;t.$get=["noEmbedService","iframelyService","$q","$injector",e],t.specialHandlers=[],t.registerHandler=function(e){t.specialHandlers.push(e)},t.config={},t.setConfig=function(e,r){t.config[e]=r},t.getConfig=function(e,r){var n=t.config[e];return angular.isDefined(n)||(n=r),n}}angular.module("angular-embed.services").provider("embedService",e)}(),function(){"use strict";function e(){function e(e){return{embed:function(r){var n=t.getKey(),a=e("https://iframe.ly/api/iframely?callback=JSON_CALLBACK&api_key="+n+"&url="+r,{},{get:{method:"JSONP"}});return a.get().$promise.then(function(e){return e.title=e.meta.title,e.provider_name=e.meta.site,e})}}}var t=this;angular.extend(t,{$get:["$resource",e],setKey:function(e){t.key=e},getKey:function(){return t.key}})}angular.module("iframely").provider("iframelyService",e)}(),function(){"use strict";function e(e){return{embed:function(t){var r=e("https://noembed.com/embed?callback=JSON_CALLBACK&url="+t,{},{get:{method:"JSONP"}});return r.get().$promise},providers:function(){var t=e("https://noembed.com/providers",{},{query:{method:"JSONP",isArray:!0,params:{callback:"JSON_CALLBACK"}}});return t.query().$promise}}}angular.module("noEmbed").service("noEmbedService",["$resource",e])}();